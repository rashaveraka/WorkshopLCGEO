<detector name="EcalBarrel" type="Ecal_Barrel_NC1" id="ILDDetID_ECAL" readout="EcalBarrelCollection" vis="BlueVis" >
    <comment>EM Calorimeter Barrel</comment>
    <dimensions numsides="8" rmin="TPC_outer_radius + TPC_ECal_gap" z="Ecal_Barrel_halfZ"/>
    <staves material="TungstenDens24" vis="BlueVis">
      <dimensions nmodules="5" thickness="Ecal_tower_thickness"/>
      <trd name="alveoli" material="TungstenDens24"  vis="GreyVis"> 
        <dimensions nmodules="Ecal_nlayers1 + Ecal_nlayers2 + Ecal_nlayers3" thickness="Ecal_total_SiSlab_thickness"/>
      </trd>
    </staves>        
    <layer repeat="Ecal_nlayers1/2" vis="SeeThrough" > <!-- 10 double SD Layers, and 5 W plates after each double SD Layer -->
        <!-- Here is only the active layer, each layer has 5 alveoli -->
        <slice material = "G4_AIR"         thickness = "Ecal_Alveolus_Air_Gap/2."                vis="Invisible" />
         <slice material = "siPCBMix"       thickness = "Ecal_Slab_PCB_thickness + Ecal_Slab_copper_thickness + Ecal_Slab_shielding" vis="GrayVis" />
          <slice material = "G4_AIR"         thickness = "Ecal_Slab_glue_gap"                      vis="Invisible" />
           <slice material = "Si"             thickness = "Ecal_Si_thickness"   sensitive = "yes"   vis="RedVis"    />
            <slice material = "GroundOrHVMix"  thickness = "Ecal_Slab_ground_thickness"              vis="Invisible" />
             <slice material = "G4_AIR"         thickness = "Ecal_fiber_thickness"                    vis="Invisible" />
              <slice material = "TungstenDens24" thickness = "Ecal_radiator_layers_set1_thickness"     vis="BlueVis"   />
             <slice material = "G4_AIR"         thickness = "Ecal_fiber_thickness"                    vis="Invisible" />
            <slice material = "GroundOrHVMix"  thickness = "Ecal_Slab_ground_thickness"              vis="Invisible" />
           <slice material = "Si"             thickness = "Ecal_Si_thickness"   sensitive = "yes"   vis="RedVis"    />
          <slice material = "G4_AIR"         thickness = "Ecal_Slab_glue_gap"                      vis="Invisible" />
         <slice material = "siPCBMix"       thickness = "Ecal_Slab_PCB_thickness + Ecal_Slab_copper_thickness + Ecal_Slab_shielding" vis="GrayVis" />
        <slice material = "G4_AIR"         thickness = "Ecal_Alveolus_Air_Gap/2."                vis="Invisible" />
        <!-- There is a structure after each active layer. (W+Fiber) W will be built inside driver, 2 Fibers will be used in placement, not here. -->
    </layer>
    <layer repeat="(Ecal_nlayers2+1)/2" vis="SeeThrough"> <!-- 5 double SD Layers, and 4 W plates after each double SD Layer, without the last W plate -->
        <!-- Here is only the active layer, each layer has 5 alveoli -->
        <slice material = "G4_AIR"         thickness = "Ecal_Alveolus_Air_Gap/2."                vis="Invisible" />
         <slice material = "siPCBMix"       thickness = "Ecal_Slab_PCB_thickness + Ecal_Slab_copper_thickness + Ecal_Slab_shielding" vis="GrayVis" />
          <slice material = "G4_AIR"         thickness = "Ecal_Slab_glue_gap"                      vis="Invisible" />
           <slice material = "Si"             thickness = "Ecal_Si_thickness"   sensitive = "yes"   vis="RedVis"    />
            <slice material = "GroundOrHVMix"  thickness = "Ecal_Slab_ground_thickness"              vis="Invisible" />
             <slice material = "G4_AIR"         thickness = "Ecal_fiber_thickness"                    vis="Invisible" />
               <slice material = "TungstenDens24" thickness = "Ecal_radiator_layers_set2_thickness"     vis="BlueVis"   />
             <slice material = "G4_AIR"         thickness = "Ecal_fiber_thickness"                    vis="Invisible" />
            <slice material = "GroundOrHVMix"  thickness = "Ecal_Slab_ground_thickness"              vis="Invisible" />
           <slice material = "Si"             thickness = "Ecal_Si_thickness"   sensitive = "yes"   vis="RedVis"    />
          <slice material = "G4_AIR"         thickness = "Ecal_Slab_glue_gap"                      vis="Invisible" />
         <slice material = "siPCBMix"       thickness = "Ecal_Slab_PCB_thickness + Ecal_Slab_copper_thickness + Ecal_Slab_shielding" vis="GrayVis" />
        <slice material = "G4_AIR"         thickness = "Ecal_Alveolus_Air_Gap/2."                vis="Invisible" />
        <!-- There is a structure after each active layer. (W+Fiber) will be built inside driver, 2 Fibers will be used in placement, not here. -->
    </layer>
</detector>
