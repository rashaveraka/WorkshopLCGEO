<!-- comment>Calorimeters</comment -->
<detector name="HcalEndcapRing" type="SHcalSc04_EndcapRing" id="ILDDetID_HCAL_RING" readout="HcalEndcapRingCollection" vis="GreenVis" insideTrackingVolume="false" >
    <comment>Hadron Calorimeter EndcapRing</comment>

    <envelope vis="ILD_HCALVis">
      <shape type="BooleanShape" operation="Subtraction" material="Air"> <!-- create envelope by cuting away the middle part -->
	<shape type="BooleanShape" operation="Intersection" material="Air" >
	  <shape type="Box" dx="Hcal_outer_radius" dy="Hcal_outer_radius" dz="Ecal_endcap_zmin+HcalEndcapRing_thickness+10.0*mm"/> <!--Box defined the coordinate system-->
          <shape type="PolyhedraRegular"  numsides="8" rmin="Ecal_outer_radius+Ecal_endcap_extra_size+Hcal_radial_ring_inner_gap" rmax="Hcal_outer_radius*0.923879533" dz="2*(Ecal_endcap_zmin+HcalEndcapRing_thickness)+1.0*mm" material="Air"/>     
	  <rotation x="0" y="0" z="90*deg-180*deg/8"/>
	</shape>
	<shape type="Box" dx="Hcal_outer_radius+1.0*mm" dy="Hcal_outer_radius+1.0*mm" dz="Ecal_endcap_zmin-1.0*mm"/>
      </shape>
    </envelope>

    <!-- absorber material-->
    <material name="Steel235"/>     
    <staves  material = "Steel235"  vis="GreenVis"/>

    <!-- The layer structure reference on page 10 in the following paper-->
    <!-- https://bib-pubdb1.desy.de/record/139781/files/LC-TOOL-2012-082.pdf -->
    <layer>
        <slice material = "Air"            thickness = "Hcal_fiber_gap"                                 vis="YellowVis" />
        <slice material = "Cu"             thickness = "Hcal_Cu_thickness"                              vis="Invisible" />
        <!-- <slice material = "FR4"            thickness = "Hcal_PCB_thickness" /> -->
        <slice material = "PCB"            thickness = "Hcal_PCB_thickness"                             vis="Invisible" />
        <slice material = "G4_POLYSTYRENE" thickness = "Hcal_scintillator_thickness" sensitive = "yes"  vis="CyanVis"   />
    </layer>
</detector>
